{% extends 'base.html' %}

{% block title %}Sign up{% endblock %}

{% block footer %}
<script src="/js/hideShowPassword.min.js"></script>
<script src="/js/app.js"></script>

<script>
    $(document).ready(function () {

        /**
         * Validate the form
         */
        $('#formSignup').validate({
            rules: {
                name: 'required',
                email: {
                    required: true,
                    email: true,
                    remote: '/account/validate-email'
                },
                password: {
                    required: true,
                    minlength: 6,
                    validPassword: true
                }
            },
            messages: {
                email: {
                    remote: 'email already taken'
                }
            }
        });


        /**
          * Show password toggle button
          */
        $('#inputPassword').hideShowPassword({
            show: false,
            innerToggle: 'focus'
        });
    });
</script>

{% endblock %}

{% block body %}

{% if user.errors is not empty %}
<p>Errors:</p>
<ul>
    {% for error in user.errors %}
    <li>{{ error }}</li>
    {% endfor %}
</ul>
{% endif %}
<div class="row align-middle">
    <div class="col-10 col-sm-8 col-md-6 col-lg-5 col-xl-4 col-xxl-3 loginPanel p-1 pt-3 mb-3 mx-auto">

        <form method="post" action="/signup/create" id="formSignup">
            <div class="row text-center justify-content-center border rounded-3 bg-success p-4 text-dark bg-opacity-10">
                <div class="col-12 text-center m-auto">
                    <div class="input-group my-3 mx-auto">
                        <span class="input-group-text" id="basic-addon1"><svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                <path
                                    d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" />
                            </svg></span>
                        <label for="name" class="form-label"></label>
                        <input type="text" id="inputName" name="name" class="form-control" placeholder="Imię"
                            value="{{ user.name }}" aria-label="Name" aria-describedby="basic-addon1" required>
                        <br />
                    </div>
                    <div class="input-group my-3 mx-auto">
                        <span class="input-group-text" id="basic-addon1"><svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                                <path
                                    d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z" />
                            </svg></span>
                        <label for="email" class="form-label"></label>
                        <input id="inputEmail" type="email" name="email" class="form-control" placeholder="Email"
                            value="{{ user.email }}" aria-label=" Email" aria-describedby="basic-addon1" required>
                        <br />
                    </div>
                    <div class="input-group my-3 mx-auto">
                        <span class="input-group-text" id="basic-addon1"><svg xmlns="http://www.w3.org/2000/svg"
                                width="16" height="16" fill="currentColor" class="bi bi-lock" viewBox="0 0 16 16">
                                <path
                                    d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z" />
                            </svg></span>
                        <label for="password" class="form-label"></label>
                        <input type="password" id="inputPassword" name="password" class="form-control"
                            aria-describedby="passwordHelp" placeholder="Hasło" required>
                    </div>
                    <div class="input-group mb-3 w-50 mx-auto justify-content-center">
                        <button type="submit" class="btn btn-primary mt-3 rounded-pill">Rejestracja</button>
                    </div>
                    <footer class="mt-3">Masz już konto? <a href="/login/new">Zaloguj się</a></footer>

        </form>
    </div>
</div>
{% endblock %}